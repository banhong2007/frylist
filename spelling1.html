<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Drag and Drop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
	
<style>
html, body {margin: 0; height: 100%; overflow: hidden}

#drop_zone1,#drop_zone2,#drop_zone3 {
    background-color: #eee;
    border: #999 1px solid ;
    width: 280px;
    height: 100px;
    padding: 8px;
    font-size: 19px;
  }


  
  .objects {
    display: inline-block;
    background-color: #FFF3CC;
    border: #DFBC6A 1px solid;
    width: 50px;
    height: 50px;
    margin: 10px;
    padding: 8px;
    font-size: 18px;
    text-align: center;
    box-shadow: 2px 2px 2px #999;
    cursor: move;
  }
</style>  
	
</head>

<body>
    <h2 id="app_status">Drag status: </h2>
    <h1>Drop Zone</h1>
	
	
    <div id="drop_zone1" ondragover="return false"></div>
    <div id="drop_zone2" ondragover="return false"></div>
	<div id="drop_zone3" ondragover="return false"></div>
	
		
	<table>
	<TR id=TR1>
	</TR>
	</table>
</body>

</html>

<script>
function _(id) {
    return document.getElementById(id);
}

var droppedIn = false;

window.onload = function () {
    // Drag zone functionality
  
    function handleDragEnter(e) {
        _('app_status').innerHTML = "You are dragging over the " + e
            .target
            .getAttribute('id');
    }

    function handleDragLeave(e) {
        _('app_status').innerHTML = "You left the " + e
            .target
            .getAttribute('id');
    }

    function handleDragDrop(e) {
        e.preventDefault();
        var element_id = e
            .dataTransfer
            .getData("text");
        e
            .target
            .appendChild(_(element_id));
        _(element_id).removeAttribute("draggable")
        _(element_id).style.cursor = "default";
        droppedIn = true;
        _('app_status').innerHTML = "You droped " + element_id + " into drop zone";
    }

 
 var str = "test"



 for (i = 1; i < str.length; i++) { 

     var object = document.createElement("TD");
         object.id = "object" + i;
		 object.class ="objects";
		 
		   object.style = "display: inline-block; background-color: #FFF3CC; border: #DFBC6A 1px solid; width: 50px; height: 50px;  margin: 10px; padding: 8px; font-size: 18px;  text-align: center; box-shadow: 2px 2px 2px #999;  cursor: move;"
		   object.draggable = "true";
		   object.innerHTML = "object " + i
var element = document.getElementById("TR1");
element.appendChild(object);
  
  var activeEvent = '';
    var originalX = '';
    var originalY = '';
 
    object.addEventListener('dragstart', handleDragStart, false);
    object.addEventListener('dragend', handleDragEnd, false);
    object.addEventListener('touchstart', handleTouchStart, false);
    object.addEventListener('touchmove', handleTouchMove, false);
    object.addEventListener('touchend', handleTouchEnd, false);
  
 
   var dropZone = _('drop_zone' + i);

    dropZone.addEventListener('dragenter', handleDragEnter, false);
    dropZone.addEventListener('dragleave', handleDragLeave, false);
    dropZone.addEventListener('drop', handleDragDrop, false);

 
}

    
    function handleDragStart(e) {
        _('app_status').innerHTML = "Dragging the element " + e
            .target
            .getAttribute('id');
        e.dataTransfer.dropEffect = "move";
        e
            .dataTransfer
            .setData("text", e.target.getAttribute('id'));
    }

    function handleDragEnd(e) {
        if (droppedIn == false) {
            _('app_status').innerHTML = "You let the " + e
                .target
                .getAttribute('id') + " go.";
        }
        droppedIn = false;
    }

    function handleTouchStart(e) {
        _('app_status').innerHTML = "Touch start with element " + e
            .target
            .getAttribute('id');
        originalX = (e.target.offsetLeft - 10) + "px";
        originalY = (e.target.offsetTop - 10) + "px";
        activeEvent = 'start';
    }

    function handleTouchMove(e) {
        var touchLocation = e.targetTouches[0];
        var pageX = (touchLocation.pageX - 50) + "px";
        var pageY = (touchLocation.pageY - 50) + "px";
        _('app_status').innerHTML = "Touch x " + pageX + " Touch y " + pageY;
        e.target.style.position = "absolute";
        e.target.style.left = pageX;
        e.target.style.top = pageY;
        activeEvent = 'move';
    }

    function handleTouchEnd(e) {
        e.preventDefault();
        if (activeEvent === 'move') {
            var pageX = (parseInt(e.target.style.left) - 50);
            var pageY = (parseInt(e.target.style.top) - 50);

            if (detectTouchEnd(dropZone.offsetLeft, dropZone.offsetTop, pageX, pageY, dropZone.offsetWidth, dropZone.offsetHeight)) {
                dropZone.appendChild(e.target);
                e.target.style.position = "initial";
                droppedIn = true;
                _('app_status').innerHTML = "You droped " + e
                    .target
                    .getAttribute('id') + " into drop zone";
            } else {
                e.target.style.left = originalX;
                e.target.style.top = originalY;
                _('app_status').innerHTML = "You let the " + e
                    .target
                    .getAttribute('id') + " go.";
            }
        }
    }

    function detectTouchEnd(x1, y1, x2, y2, w, h) {
        //Very simple detection here
        if (x2 - x1 > w) 
            return false;
        if (y2 - y1 > h) 
            return false;
        return true;
    }
}

</script>